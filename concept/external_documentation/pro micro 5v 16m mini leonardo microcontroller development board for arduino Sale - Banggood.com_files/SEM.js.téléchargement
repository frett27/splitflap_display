!function(){var cfg={};if(location.hostname.indexOf('gbeta')>-1){cfg.dcDomain='//dcbeta.banggood.com/index.php?test=1&';cfg.recDomain='//recbeta.banggood.com/index.php?test=1&';}else{cfg.dcDomain='//dc.banggood.com/index.php?';cfg.recDomain='//rec.banggood.com/index.php?';} var recBaseUrl=cfg.recDomain;var dcBaseUrl=cfg.dcDomain;var baseHostName=location.hostname.match(/\.(.+)/)[1];var Rd=window.Rd={C:{},D:{},type:['view','search','wish','cart','review','presell','preorder','share','ask','pricealter','sawprice','downp','checkout','buynow','signIn','facebookLogin','twitterLogin','googleLogin','vkLogin','accountCreate','passwordSend','invite','reportError','paypal','proceed','placeOrder'],rmmdstype:['home-mid-recommendations','search-left-hotproducts','search-bottom-lookingfor','category-left-hotproducts','detail-top-unbeatable','detail-top-buytogether','detail-top-relatedproducts','detail-middle-newarrivals','detail-middle-relatedproducts','detail-middle-alsobought','detail-left-recommendations','detail-left-mostsold','detail-left-mostwished','detail-left-hotproducts','detail-left-viewhistory','detail-bottom-alsobought','detail-bottom-relatedproducts','detail-bottom-alsolike','detail-bottom-reletedsearches','myaccout-bottom-alsolike','myaccout-bottom-latestwishlist','myaccout-bottom-viewhistory','cart-bottom-lookingfor','detail-top-buytogether-auto','detail-bottom-viewalsoview','checkOutSuccess-bottom-alsobought','category-left-mostsold','category-left-mostwished'],classtype:['.goods_together','.goods_together_new','.recommend_product .good_tabs_box','#recomm_endations','.detailpage .hotlist_3 .goodlist_1:first-child','.detailpage .hotlist_3 .goodlist_1:last-child','.hotlist_2','.wrap_right_box_b2','.wrap_right_box_b','.listlookingfor','.hotlist_1','.related_product_item','.lookingforbag','.today_recommend','.customersallbuy_item'],ajaxclasstype:['.rec_recommendations','.rec_hotgoods_970','.rec_viewalsoview','.rec_purchases','.rec_most_purchases .bot .goodlist_1:first-child','.rec_most_purchases .bot .goodlist_1:last-child','.hotlist_1','.related_item','.recommendation_item','.modules_item'],setBidLabel:['.focus_box li','.banner_main_min li','.hotcate_box_banner_left li','.index_brand_banner','.cate_list .cate_direct_ads','.cate_list .cate_banner','.category_banner_min','.fashioin_item_ad','.women_event_ad .two_ad','.women_event_ad .three li span','.datacube_banner'],tm24:1440000,td15:1296000000,ty1:31104000000,rp:document.referrer.replace(/\$/g,""),vp:document.location.href,site:document.location.host,addwishBtn:'.add_wish_btn, .datacube_ac_wish',addcartBtn:'.buy_link .addcart, .datacube_ac_cart',addbuynowBtn:'.buy_link .buynow, .add_buy_now',addshareBtn:'.showfacebookshare, .pin_it, .reddit_share_item',addpersellBtn:'.buy_link .arrivalnotice, .datacube_ac_presell',addperorderBtn:'.buy_link .perorder,.fast_addtocart .perorder,.datacube_ac_perorder',selectCartBtn:'.datacube_ac_select_cart',addaskBtn:$('.write_item #post_topic'),addsawpriceBtn:$('.sendsawprice'),addpricealertBtn:'.price_alert_dialog .price_alert_dialog_btn input',addcheckoutBtn:'.payment_btn a',newpaypalBtn:'.payment_item .paypal',newproceedBtn:'.payment_item .proceed',adddownpBtn:$('#export_but'),adddownpECBtn:$('#export_cat_but'),addreviewBtn:$('.input_addmessage'),downd_cid:$('input[name="d_cid[]"]'),downd_pid:$('.my_itemcheckbox .itemCheckbox'),vkBtn:$(document).find('.vk_share_item a').eq(0),addperorderPageBtn:$('.perorder a'),addflashdealsBtn:$('.pro_like a'),signIn:$('#minilogin li.submit input'),facebookLogin:$('.modal_login_other .facebook a'),twitterLogin:$('.modal_login_other .twitter a'),googleLogin:$('.modal_login_other .google a'),vkLogin:$('.modal_login_other .vk a'),accountCreate:$('#minireg li.submit input'),passwordSend:$('#miniforgot li.submit input'),invite:'.modal_receive .formsubmit',reportError:'#errorReportForm .formsubmit',myrecnum:'1',exposureByNewWay:false,Wv:function(s,g,p,l){s=s+"="+g+"; path=/; ";l&&(s+="expires="+(new Date(new Date().getTime()+l)).toGMTString()+"; ");p&&(s+="domain="+p+";");document.cookie=s;},Vv:function(y){for(var g=[],t=document.cookie.split(";"),l=RegExp("^\\s*"+y+"=\\s*(.*?)\\s*$"),s=0;s<t.length;s++){var p=t[s]["match"](l);p&&g.push(p[1]);} return g;},Gp:function(l,p){var s=new RegExp(".*(?:^|&|[?]|[/])"+l+"=([^&]*).*$");var g=s.exec(p);return g?encodeURIComponent(g[1]):"";},Gup:function(n){var s=new RegExp("(^|&)"+n+"=([^&]*)(&|$)");var g=window.location.search.substr(1).match(s);if(g!=null){return unescape(g[2])};},Gpid:function(l,h){var s=new RegExp(".*-wp-[a-zA-Z]{2,3}-([0-9]*)\\.html"),g=null,id=0;if(h=='us.banggood.com'||h=='uspre.banggood.com'||h=='eu.banggood.com'||h=='eupre.banggood.com'){s=new RegExp(".*(-wp-[a-zA-Z]{2,3}-|-p-)([0-9]*)\\.html");g=s.exec(l);id=g?encodeURIComponent(g[2]):0;}else{s=new RegExp(".*-p-([0-9]*)\\.html");g=s.exec(l);id=g?encodeURIComponent(g[1]):0;} return id;},Gcid:function(l,h){var s=h=='us.banggood.com'&&new RegExp(".*-c-[a-zA-Z]{2,3}-([0-9]*)[-.]")||h=='eu.banggood.com'&&new RegExp(".*-c-[a-zA-Z]{2,3}-([0-9]*)[-.]")||new RegExp(".*-c-([0-9]*)[-.]");if(l.indexOf('-sellers')>-1){s=new RegExp(".*-sellers-([0-9]*)[-.]");} if(l.indexOf('whclearance')>-1){s=new RegExp(".*-ci-([0-9]*)[-.]");} var g=s.exec(l);return g?encodeURIComponent(g[1]):0;},Gbrand:function(l,h){var s=new RegExp(".*-b-([0-9]+)([-ac]*)\\.html");var g=s.exec(l);return g?encodeURIComponent(g[1]):0;},Gkeyword:function(l,h){var s=h=='us.banggood.com'&&new RegExp("\\/(wh_buy\\/[a-zA-Z]{2,3}|buy)\\/([^/]*)[.\]")||h=='eu.banggood.com'&&new RegExp("\\/(wh_buy\\/[a-zA-Z]{2,3}|buy)\\/([^/]*)[.\]")||new RegExp("\\/(search|buy)\\/([^/]*)[.\]");var g=s.exec(l);if(g==null){s=h=='us.banggood.com'&&new RegExp("\\/(wh_buy\\/[a-zA-Z]{2,3}|buy)\\/([^/]*)[/\]")||h=='eu.banggood.com'&&new RegExp("\\/(wh_buy\\/[a-zA-Z]{2,3}|buy)\\/([^/]*)[/\]")||new RegExp("\\/(search|buy)\\/([^/]*)[/\]");g=s.exec(l);} return g?encodeURIComponent(g[2]):"";},parseRP:function(rp){var a=document.createElement("a");a.href=rp;if(a.hostname.indexOf(baseHostName)==-1){return false;} this.C.r_cid=this.Gcid(a.pathname,a.hostname);this.C.r_bid=this.Gp('bid',a.search);this.C.r_keywords=this.Gkeyword(a.pathname,a.hostname);this.C.r_pid=this.Gpid(a.pathname,a.hostname);this.C.r_brandid=this.Gbrand(a.pathname,a.hostname);if(window.localStorage.getItem("flashdealspreorder_CID")!=null){this.C.r_cid=window.localStorage.getItem("flashdealspreorder_CID");window.localStorage.removeItem('flashdealspreorder_CID');}},parseVP:function(w){var rmmdsUrl=this.Gp('rmmds',w.search).split('__');this.C.r_position=rmmdsUrl[0];if(rmmdsUrl[1]==undefined){rmmdsUrl[1]='';} this.C.r_location=rmmdsUrl[1];this.C.banner_id=this.Gp('bid',w.search);this.C.categories_id=this.Gcid(w.pathname,w.hostname);this.C.products_id=this.Gpid(w.pathname,w.hostname);this.C.site_keywords=this.Gkeyword(w.pathname,w.hostname);this.C.brand_id=this.Gbrand(w.pathname,w.hostname);this.C.ac=this.C.site_keywords?this.type[1]:this.type[0];if(this.vp.indexOf('/buy/')>-1){this.C.ac='buy'} if(window.localStorage.getItem("flashdealspreorderCID")!=null){this.C.categories_id=window.localStorage.getItem("flashdealspreorderCID");window.localStorage.setItem("flashdealspreorder_CID",this.C.categories_id);window.localStorage.removeItem('flashdealspreorderCID');} if(typeof(report_search_data)!='undefined'){this.C.categories_id=report_search_data.cateId;window.localStorage.setItem("flashdealspreorder_CID",this.C.categories_id);} if(this.vp.indexOf('wh_buy')>-1){var a=this.vp.split('/');if(a.length>6){var s=new RegExp("\\/(wh_buy\\/[a-zA-Z]{2,3}|buy)\\/([^/]*)\\/([0-9]*)[-\]");var g=s.exec(this.vp);this.C.categories_id=g[3];window.localStorage.setItem("flashdealspreorder_CID",this.C.categories_id);}} if(this.C.products_id>0){if(document.querySelector('ol[class="inhere"]')!=null){var bid=document.querySelector('ol[class="inhere"]');}else if(document.querySelector('ol[class="breadcrumb"]')!=null){var bid=document.querySelector('ol[class="breadcrumb"]');} var a=bid.getElementsByTagName('a'),b=[];for(var i=0;i<a.length;i++){var href=a[i].getAttribute('href');b.push(href);} window.localStorage.setItem("flashdealspreorder_CID",this.Gcid(b.pop(),w.hostname));}},changeRecord:function($a,type,$container){if(typeof($a)=='object'&&Object.prototype.toString.call($a).toLowerCase()=='[object object]'&&!$a.length){if(Rd&&Rd.exposureByNewWay&&Rd.newExposureWay){Rd.newExposureWay.changeRecord($a);}}else{if(Rd&&Rd.exposureByNewWay&&Rd.newExposureWay){if(!$container){Rd.newExposureWay.retestRecord($a,type);}else{Rd.newExposureWay.collectExposureDomA('',$container);}}}},init:function(){var _self=this;this.checkStorage();if(this.site.indexOf(baseHostName)==-1){return false} this.C.customers_id=this.Vv('dc_cid')[0]||0;this.C.site=this.site;var u=this.Vv('rec_uid'),u1=u.length>0?u[0].split('|'):[],s=this.Vv('rec_sid'),s1=s.length>0?s[0].split('|'):[];if(u1.length>0){this.C.user_id=u1[0]||0;this.C.ft=u1[1]||0;} this.C.sess_id=s1.length>0?s1[0]:0;if(this.rp){this.C.rp=encodeURIComponent(this.rp);this.parseRP(this.rp);} this.C.vp=encodeURIComponent(this.vp);this.parseVP(document.location);if(typeof(RecNotFoundPage)!='undefined'){this.C.page_status=404;}else{this.C.page_status=200;} this.sendRec();$(document).on("click",'.flashdeals_nav li a,.category .area_left a',function(){var cid=$(this).attr('data-cid');if(typeof(cid)!='undefined'){window.localStorage.setItem("flashdealspreorderCID",cid);}});$(this.addwishBtn).click($.proxy(Rd,"detailAutoClick",this.type[2],this.C.products_id));$(document).on("click",this.addcartBtn,$.proxy(Rd,"detailAutoClick",this.type[3],this.C.products_id));$('.datacube_onlyforyou_ac_wish').click(function(){var id=$(this).data('product-id');Rd.detailAutoClick(Rd.type[2],id);});$('.datacube_onlyforyou_ac_cart').click(function(){var id=$(this).data('product-id');Rd.detailAutoClick(Rd.type[3],id);});$(document).on("click",this.addbuynowBtn,$.proxy(Rd,"detailAutoClick",this.type[13],this.C.products_id));this.addaskBtn.click($.proxy(Rd,"detailAutoClick",this.type[8],this.C.products_id));$(this.addshareBtn).click($.proxy(Rd,"detailAutoClick",this.type[7],this.C.products_id));this.addsawpriceBtn.click($.proxy(Rd,"detailAutoClick",this.type[10],this.C.products_id));$(document).on("click",this.addpricealertBtn,$.proxy(Rd,"detailAutoClick",this.type[9],this.C.products_id));$(document).on("click",this.addperorderBtn,$.proxy(Rd,"detailAutoClick",this.type[6],this.C.products_id));$(this.addpersellBtn).click($.proxy(Rd,"detailAutoClick",this.type[5],this.C.products_id));$(document).on("click",this.addcheckoutBtn,function(){var sendPid=[];var rid=[];$('.cart_ul_items').each(function(){if($(this).find('.itemCheckbox').hasClass('checkbox_on_active')){var pid=$(this).find('.checkbox_on_active').attr('pid');sendPid.push(pid);var basket=Rd.getStorage('rec_pid_'+pid);if(basket){rid.push(basket.rid);}else{rid.push(0);}}});Rd.C.basket_id=rid;Rd.detailAutoClick(Rd.type[12],sendPid);});$(document).on("click",this.newpaypalBtn,function(){var sendPid=[];var rid=[];$('.newcart_list_items').each(function(){if($(this).find('.itemCheckbox').hasClass('checkbox_on_active')){var pid=$(this).attr('cart_id').split('_')[0];sendPid.push(pid);var basket=Rd.getStorage('rec_pid_'+pid);if(basket){rid.push(basket.rid);}else{rid.push(0);}}});Rd.C.basket_id=rid;Rd.detailAutoClick(Rd.type[23],sendPid);});$(document).on("click",'.payment_item .proceed:not(".checkout_btn")',function(){var sendPid=[];var rid=[];$('.newcart_list_items').each(function(){if($(this).find('.itemCheckbox').hasClass('checkbox_on_active')){var pid=$(this).attr('cart_id').split('_')[0];sendPid.push(pid);var basket=Rd.getStorage('rec_pid_'+pid);if(basket){rid.push(basket.rid);}else{rid.push(0);}}});Rd.C.basket_id=rid;Rd.detailAutoClick(Rd.type[24],sendPid);});$(document).on("click",'.payment_item .checkout_btn:not(".paypal")',function(){var sendPid=[];var rid=[];$('.newcart_list_items').each(function(){var pid=$(this).attr('cart_id').split('_')[0];sendPid.push(pid);var basket=Rd.getStorage('rec_pid_'+pid);if(basket){rid.push(basket.rid);}else{rid.push(0);}});Rd.C.basket_id=rid;Rd.detailAutoClick(Rd.type[25],sendPid);});this.addreviewBtn.click($.proxy(Rd,"detailAutoClick",this.type[4],$('.post_score .total').attr('data-key')));this.vkBtn.click($.proxy(Rd,"detailAutoClick",this.type[7],this.C.products_id));this.adddownpBtn.click($.proxy(Rd,"adddownpBtnclick"));this.adddownpECBtn.click($.proxy(Rd,"adddownpECBtnclick"));this.addperorderPageBtn.each(function(){if(window.localStorage.getItem("flashdealspreorder_CID")!=null){Rd.C.r_cid=window.localStorage.getItem("flashdealspreorder_CID");} $(this).click($.proxy(Rd,"detailAutoClick",'preorder',$(this).attr('pid')));});this.addflashdealsBtn.each(function(){if(window.localStorage.getItem("flashdealspreorder_CID")!=null){Rd.C.r_cid=window.localStorage.getItem("flashdealspreorder_CID");} $(this).click($.proxy(Rd,"detailAutoClick",'wish',$(this).next().val()));});this.signIn.click($.proxy(Rd,"detailAutoClick",this.type[14],this.C.products_id));this.facebookLogin.click($.proxy(Rd,"detailAutoClick",this.type[15],this.C.products_id));this.twitterLogin.click($.proxy(Rd,"detailAutoClick",this.type[16],this.C.products_id));this.googleLogin.click($.proxy(Rd,"detailAutoClick",this.type[17],this.C.products_id));this.vkLogin.click($.proxy(Rd,"detailAutoClick",this.type[18],this.C.products_id));this.accountCreate.click($.proxy(Rd,"detailAutoClick",this.type[19],this.C.products_id));this.passwordSend.click($.proxy(Rd,"detailAutoClick",this.type[20],this.C.products_id));$(document).on("click",this.invite,$.proxy(Rd,"detailAutoClick",this.type[21],this.C.products_id));$(document).on("click",this.reportError,$.proxy(Rd,"detailAutoClick",this.type[22],this.C.products_id));$(document).on("click",'.deals_product .productlist .wishlist',function(){var pid=$(this).parent().parent().attr('pid');Rd.detailAutoClick(Rd.type[2],pid);});$(document).on("click",'.deals_product .productlist .addcart',function(){var pid=$(this).parent().parent().attr('pid');Rd.detailAutoClick(Rd.type[3],pid);});$(document).on("click",'.pro_cart_btn .btn_add',$.proxy(Rd,"detailAutoClick",this.type[3],this.C.products_id));$(document).on("click",'.pro_cart_btn .btn_buy,.fast_addtocart .fast_addcart',$.proxy(Rd,"detailAutoClick",this.type[13],this.C.products_id));$(document).on("click",'.ask_question .formsubmit input',$.proxy(Rd,"detailAutoClick",this.type[8],this.C.products_id));$(document).on("click",'.similar .similar_list .like',function(){var vp=$(this).closest('li').find('.img a').attr('href');var C=_self.C;_self.addAccountWishlist($(this).attr('data-id'),vp,C);});$('.prolist').each(function(){var pid=$(this).find('.colAC').attr('pid');$(this).find('.colAC').click($.proxy(Rd,"detailAutoClick",Rd.type[3],pid));});var togethertimer=setInterval(function(){if($(document).find('.goods_together_all').length>0){$(document).find('.goods_together_all .goods_together_sub').each(function(){var o=$(this);var hostpid=Rd.Gpid(Rd.vp,Rd.site);var lastCateHref=$('.inhere li').last().find('a').attr('href');var lastCateID=Rd.Gcid(lastCateHref,location.hostname);$(this).find('.selected_cart,.buy_now').click(function(){var _this=$(this);var sendPid=[];var sendauto=[];sendPid.push(hostpid);o.siblings('.scroll_box').find('li').each(function(){if($(this).find('.price').children().hasClass('checkbox_on_active')){var href=$(this).find('.checkbox_on_active').parent().prev().find('a').attr('href');var auto=Rd.Gp('rmmds',href);sendauto.push(auto);var showProductId=Rd.Gpid(href,Rd.site);sendPid.push(showProductId);}});if($(this).closest('.goods_together_all').hasClass('goods_together')){if(sendauto.indexOf('detail-top-buytogether')==-1&&sendauto.indexOf('detail-top-buytogether-auto')==-1){Rd.C.r_position='detail-top-buytogether';}else if(sendauto.indexOf('detail-top-buytogether')>-1&&sendauto.indexOf('detail-top-buytogether-auto')==-1){Rd.C.r_position='detail-top-buytogether';}else{Rd.C.r_position='detail-top-buytogether-auto';}}else{Rd.C.r_position='detail-top-unbeatable';} Rd.C.r_cid=lastCateID;if($(this).hasClass('selected_cart')){Rd.detailAutoClick(Rd.type[3],sendPid);}else{Rd.detailAutoClick(Rd.type[13],sendPid);} setTimeout(function(){Rd.C.r_position=Rd.Gp('rmmds',Rd.vp);},500);});});clearInterval(togethertimer);}},3000);$(document).on("click",Rd.selectCartBtn,function(){var $this=$(this);var hostpid=Rd.Gpid(Rd.vp,Rd.site);var lastCateHref=$('.breadcrumb li').last().find('a').attr('href');var lastCateID=Rd.Gcid(lastCateHref,location.hostname);var sendPid=[];var sendauto=[];sendPid.push(hostpid);$this.parents('.item_bought_bd').find('.bought_list li').each(function(){if($(this).find('.now_price').hasClass('checkbox_active1')){var href=$(this).find('.img a').attr('href');var auto=Rd.Gp('rmmds',href);sendauto.push(auto);var showProductId=Rd.Gpid(href,Rd.site);sendPid.push(showProductId);}});var rmmdsUrl=$this.parents('.item_bought_bd').find('.bought_list li').eq(0).find('.img a').attr('href');var rmmds=Rd.Gp('rmmds',rmmdsUrl);Rd.C.r_position=rmmds;Rd.C.r_cid=lastCateID;Rd.detailAutoClick(Rd.type[3],sendPid);setTimeout(function(){Rd.C.r_position=Rd.Gp('rmmds',Rd.vp);},500);});this.mySetCollect();if(Rd.exposureByNewWay){Rd.newExposureWay=new Exposure();}else{this.myBannerBid();}},myBannerBid:function(){function getBidArr(){var allBidArr=[];$(document).find('a').each(function(){var link=$(this).attr('href');var bid=Rd.Gp('bid',link);bid=bid.split('%');if(bid[0]!=''){allBidArr.push(bid[0]);}});return allBidArr;} var bidArr=getBidArr();if(bidArr.length){this.sendBannerBid(bidArr);} function distinct(a,b){for(var i=0;i<a.length;i++){for(var j=0;j<b.length;j++){if(a[i]==b[j]){b.splice(j,1);j--;}}} return b;} var BidTimer=setInterval(function(){var asyncBidArr=getBidArr();var newArr=distinct(bidArr,asyncBidArr);if(newArr.length){Rd.sendBannerBid(newArr);} clearInterval(BidTimer);},6000);},mySetCollect:function(){var collectelement='ul li';var Redefinerecname=this.CollectRecResult;var recProductIdArr=[];var RpositionArr=[];for(var i=0;i<this.classtype.length;i++){if($(document).find(this.classtype[i]).length>0){if((this.classtype[i]==this.classtype[0])||(this.classtype[i]==this.classtype[1])){collectelement='.scroll_box ul li';}else if((this.classtype[i]==this.classtype[4])||(this.classtype[i]==this.classtype[5])){collectelement='li';}else{collectelement='ul li';} if($(this.classtype[2]).length>0){$(document).find(this.classtype[2]).find('.list').each(function(){$(this).find('ul li').each(function(){Rd.CollectAuto($(this),recProductIdArr,RpositionArr);});Redefinerecname(Rd,recProductIdArr,RpositionArr[0],'');recProductIdArr=[];RpositionArr=[];});}else{$(document).find(this.classtype[i]).find(collectelement).each(function(){Rd.CollectAuto($(this),recProductIdArr,RpositionArr);});Redefinerecname(Rd,recProductIdArr,RpositionArr[0],'');recProductIdArr=[];RpositionArr=[];}}} var JGO=Rd;this.AutoRecClick(JGO,'');var rectimer=0;rectimer=setInterval(function(){for(var i=0;i<JGO.ajaxclasstype.length;i++){if($(JGO.ajaxclasstype[i]).length>0){JGO.AutoGetAjaxData(JGO.ajaxclasstype[i],JGO);clearInterval(rectimer);}}},6000);},AutoRecClick:function(obj,o){if(typeof(o)==''){o='a';}else{o=o+'a';} var JGarr=this.rmmdstype;var recProductIdArr=[];var RpositionArr=[];$(document).on('click',o,function(){var src=$(this).attr('href');var showProductId=Rd.Gpid(src,Rd.site);var label=Rd.Gp('rmmds',src);if(JGarr.indexOf(label)>-1&&label!=''){$(this).closest('ul').find('li').each(function(){var src=$(this).find('a').eq(0).attr('href');var Rposition=Rd.Gp('rmmds',src);var pid=Rd.Gpid(src,Rd.site);recProductIdArr.push(pid);});obj.CollectRecResult(obj,recProductIdArr,label,showProductId,1);}});},AutoGetAjaxData:function(o,obj){var recProductIdArr=[];var RpositionArr=[];var collectelement='ul li';for(var i=0;i<obj.ajaxclasstype.length;i++){if($(document).find(obj.ajaxclasstype[i]).length>0){if((obj.ajaxclasstype[i]==obj.ajaxclasstype[4])||(obj.ajaxclasstype[i]==obj.ajaxclasstype[5])){collectelement='li';}else{collectelement='ul li';}}} $(document).find(o).find(collectelement).each(function(){obj.CollectAuto($(this),recProductIdArr,RpositionArr);});obj.CollectRecResult(obj,recProductIdArr,RpositionArr[0],'');recProductIdArr=[];RpositionArr=[];obj.AutoRecClick(obj,o);},CollectAuto:function(obj,recProductIdArr,RpositionArr){var src=$(obj).find('a').eq(0).attr('href');var Rposition=Rd.Gp('rmmds',src);var showProductId=Rd.Gpid(src,Rd.site);recProductIdArr.push(showProductId);Rposition=Rposition.replace(/__\d+$/,'');RpositionArr.push(Rposition);},CollectRecResult:function(obj,id,position,pid,num){obj.D.customers_id=obj.Vv('dc_cid')[0]||0;obj.D.site=obj.site;var u=obj.Vv('rec_uid'),u1=u.length>0?u[0].split('|'):[],s=obj.Vv('rec_sid'),s1=s.length>0?s[0].split('|'):[];if(u1.length>0){obj.D.user_id=u1[0]||0;} obj.D.sess_id=s1.length>0?s1[0]:0;obj.D.visit_page=encodeURIComponent(obj.vp);if(obj.rp){obj.D.rp=encodeURIComponent(obj.rp);}else{obj.D.rp='';} obj.D.showProductId=id;obj.D.r_position=position;obj.D.ac='show';if(pid!=''){obj.D.clickProductId=pid;obj.D.ac='click';} if(typeof(num)!='undefined'){obj.sendRecResult(1);}else{obj.sendRecResult();}},getCookie:function(cname){var name=cname+"=";var ca=document.cookie.split(';');for(var i=0;i<ca.length;i++){var c=ca[i];while(c.charAt(0)==' ')c=c.substring(1);if(c.indexOf(name)!=-1)return c.substring(name.length,c.length);} return"";},detailAutoClick:function(type,id){this.C.products_id=id;var key=[3,6,13];for(i in key){if(this.type.hasOwnProperty(key[i])&&type==this.type[key[i]]){this.Wv('rec_position',this.C.r_position,baseHostName,this.ty1);break;}} if(type==this.type[12]||type==this.type[23]||type==this.type[24]||type==this.type[25]){this.C.r_position=this.Vv('rec_position');} if(type==this.type[3]&&this.vp.indexOf('collection')>-1){this.C.r_position='collection';} this.operate(type,this.C.products_id);},adddownpBtnclick:function(){var pid_list=[];this.downd_pid.each(function(){$(this).hasClass('checkbox_on_active')?pid_list.push($(this).parent().find("input").val()):0;});this.C.products_id=pid_list;this.C.r_position='DSdownloadcenter';this.operate(this.type[11],this.C.products_id);},adddownpECBtnclick:function(){var cid_list=[];this.downd_cid.each(function(){cid_list.push($(this).val());});(cid_list[cid_list.length-1]==0&&cid_list.length>1)?this.C.categories_id=cid_list[cid_list.length-2]:this.C.categories_id=cid_list[cid_list.length-1];this.C.r_position='DSdownloadcenter';this.operate(this.type[11],'',this.C.categories_id);},addAccountWishlist:function(id,vp,C){this.C={r_cid:"",r_position:'wishlist-middle-similar',products_id:id,vp:vp,customers_id:C.customers_id,site:C.site,user_id:C.user_id,sess_id:C.sess_id,rp:C.rp};this.operate(this.type[2],id);},operate:function(type,pid,cid){pid=pid||this.C.products_id;cid=cid||0;this.C.categories_id=cid;var ac=false;for(var i=0;i<this.type.length;i++){if(type==this.type[i]){ac=this.type[i];}} if(!ac){return false} this.C.ac=ac;this.sendRec();},sendRec:function(){var s='';for(var k in this.C){s+='&'+k+'='+this.C[k];} function ajax(options){options=options||{};options.type=(options.type||"GET").toUpperCase();options.dataType=options.dataType||'jsonp';options.async=options.async||true;var params=options.data;var xhr;if(window.XMLHttpRequest){xhr=new XMLHttpRequest();}else{xhr=new ActiveXObject('Microsoft.XMLHTTP');} xhr.withCredentials=true;xhr.onreadystatechange=function(){if(xhr.readyState==4){var status=xhr.status;if(status>=200&&status<300){options.success&&options.success(xhr.responseText,xhr.responseXML);}else{options.fail&&options.fail(status);}}};if(options.type=='GET'){xhr.open("GET",options.url+'?'+params,options.async);xhr.send(null);}else if(options.type=='POST'){xhr.open('POST',options.url,options.async);xhr.setRequestHeader('Content-Type','application/x-www-form-urlencoded');xhr.send(params);}} ajax({url:recBaseUrl+"com=recommend&t=record",type:'POST',data:s,crossDomain:true,dataType:'jsonp',jsonp:'callback',async:false,success:function(response){eval(response);},});if(Rd.exposureByNewWay){var ac=this.C['ac'];var pidArr=this.C.products_id;if(typeof(nDC)!='undefined'&&nDC.RecordClick){nDC.RecordClick(ac,pidArr);}}},sendRecResult:function(num){var recstorage=window.localStorage;var s='';for(var k in this.D){s+='&'+k+'='+this.D[k];} if(typeof(num)!='undefined'){recstorage.setItem("reclocallabel",s);}else{var g=recBaseUrl+"com=recommend&t=show"+s+"&callback=?";$.getJSON(g,function(){});} if(this.myrecnum<2){var Storageg=recBaseUrl+"com=recommend&t=show"+recstorage.getItem("reclocallabel")+"&callback=?";$.getJSON(Storageg,function(){});recstorage.removeItem('reclocallabel');} this.myrecnum++;},sendRec2:function(){var s='';for(var k in this.C){s+='&'+k+'='+this.C[k];} var g=("https:"==document.location.protocol?"https://rec":"http://rec")+".banggood.com/index.php?com=recommend&t=record"+s+"&callback=?";$.getJSON(g,function(){})},sendBannerBid:function(bid){var g=dcBaseUrl+"com=record&t=aysnCollectBanner&domain=banggood.com&banner_id="+bid+"&callback=?";$.getJSON(g,function(){});},callback:function(data){var _t=data.split('.');if(_t.length>1){var uid=_t[0]||0,sid=_t[1]||0,st=_t[2]||0,ft=this.C.ft||st,rids=_t[3]||0,pids=_t[4]||0;this.C.user_id=uid;this.C.sess_id=sid;this.Wv('rec_uid',uid+'|'+ft,baseHostName,this.ty1);this.Wv('rec_sid',sid+'|'+st,baseHostName,this.tm24);if(rids!=0&&pids!=0){var pidArr=pids.split(',');var ridArr=rids.split(',');for(var i=0;i<pidArr.length;i++){var pid=pidArr[i];var rid=ridArr[i];if(pid&&rid){this.setStorage('rec_pid_'+pid,{rid:rid,pid:pid},this.td15);}}}} return true;},setStorage:function(key,value,exp){var curTime=new Date().getTime();key='exp_'+key;localStorage.setItem(key,JSON.stringify({data:value,time:curTime,exp:exp}));},getStorage:function(key){key='exp_'+key;var data=localStorage.getItem(key);var dataObj=JSON.parse(data);if(!dataObj)return dataObj;return dataObj.data;},checkStorage:function(){for(var i=localStorage.length-1;i>=0;i--){var key=localStorage.key(i);if(/^exp_/.test(key)){var item=localStorage.getItem(key);var dataObj=JSON.parse(item);if(new Date().getTime()-dataObj.time>dataObj.exp){localStorage.removeItem(key);}}}}};function Exposure(_option){var option={D:{},ac:['click','show'],collectName:'exclick',exposureUrl:dcBaseUrl+'com=record&t=collectBanner','startCharacter':'http','defaultRmmds':'common','coverContainerArr':['.bought_list','.jsScrollScreen','.scroll_box'],'info':[],'scrollBarW':17,'observerClassName':'.jsObserver','observerBoxClass':'.jsCOB','idList':{},};$.extend(this,option,_option);this.init();} Exposure.prototype={init:function(){var E=this;E.idList={};E.dataReserve();E.collectExposureDom();document.addEventListener('scroll',E.registerRecord);E.bindEvent();E.setIntersectObj();E.activateObserver($(E.observerClassName));},dataReserve:function(){var E=this,that=window.Rd;var hostArr=that.site.split('.'),domain=hostArr.length===2?hostArr.join('.'):hostArr.slice(1).join('.'),_bguser=that.Vv('__bguser')&&that.Vv('__bguser')[0]||'',_bguserMsg=_bguser.split('|');E.D={'domain':domain,'site':that.site,'user_id':_bguserMsg[2]||0,'sess_id':_bguserMsg[1]||0,'ac':E.ac[1],'vp':that.C.vp,'rp':(that.rp)?encodeURIComponent(that.rp):'','customers_id':that.Vv('dc_cid')&&that.Vv('dc_cid')[0]||0};},collectExposureDom:function(){var E=this;E.collectExposureDomA();var T=setInterval(function(){E.collectExposureDomA();clearInterval(T);},6000);},registerRecord:function(){var that=window.Rd,E=that.newExposureWay||this;clearTimeout(that.scrollTimer);that.scrollTimer=setTimeout(function(){var rect=document.documentElement.getBoundingClientRect();for(var i in that.elemObj){if(that.elemObj[i]&&that.elemObj[i].length>0){E.elemExposure(i);}} E.sendDc(E.info);},500);},elemExposure:function(rmmds,bid){var that=window.Rd,E=this,temArr=[],temPidArr=[],currentTemArr=that.elemObj[rmmds],exposurePidArr=[],exposureBannerArr=[],rmmds=rmmds?rmmds:E.defaultRmmds,sTop=$(window).scrollTop(),ft=E.fixedDomHeight(),winH=$(window).height(),winW=$(window).width(),i=0,len=0,imgDom=null,canSend=false,src='',idList=E.idList[rmmds]||[];if(currentTemArr&&currentTemArr.length){len=currentTemArr.length;for(;i<len;i++){canSend=false,src=currentTemArr[i].elem.find('img').attr('src');if($.inArray(currentTemArr[i].pid,idList)==-1){if(currentTemArr[i].elem.parents('body').length!=0&&(src&&src.indexOf('grey.gif')<=-1)){imgDom=currentTemArr[i].elem.find('img')[0];}else{imgDom=$('.img a[href*="'+currentTemArr[i].pid+'"]').find('img')[0];} if(imgDom){var elemRect=E.getOffetBox(imgDom),top=elemRect.top,ht=elemRect.height,wh=elemRect.width,left=elemRect.left,$scrollView=currentTemArr[i].$shadeParent;if(ht>1){var judge=sTop+winH>=top+ht/2&&sTop<=top+ht/2-ft,judge=judge&&((left<=0&&((winW-E.scrollBarW)>=(left+wh/2))&&-left<wh/2)||(left>0&&winW-left>(wh/2+E.scrollBarW))),judgeInScrollView=true;if(judge&&$scrollView&&$scrollView.length>0){var rect=$scrollView[0].getBoundingClientRect();currentTemArr[i].elemParentLeft=rect.left;currentTemArr[i].elemParentRight=rect.right;var epLeft=currentTemArr[i].elemParentLeft,epRight=currentTemArr[i].elemParentRight;if(epLeft&&epRight){if(elemRect.left>=epRight||elemRect.right<=epLeft||((elemRect.left<epLeft&&elemRect.right>epLeft)&&((elemRect.right-epLeft)<elemRect.width/2))||((elemRect.left<epRight&&elemRect.right>epRight)&&((epRight-elemRect.left)<elemRect.width/2))){judgeInScrollView=false;}else{judgeInScrollView=true;}}} if(judge&&judgeInScrollView&&((bid&&bid==currentTemArr[i].pid)||!bid)){if(currentTemArr[i].isBanner!=1){if($.inArray(currentTemArr[i].pid,exposurePidArr)==-1){exposurePidArr.push(currentTemArr[i].pid);}}else{if($.inArray(currentTemArr[i].pid,exposureBannerArr)==-1){exposureBannerArr.push(currentTemArr[i].pid);}} canSend=true;}}}}else{canSend=true;} if(!canSend){if($.inArray(currentTemArr[i].pid,temPidArr)==-1){temArr.push(currentTemArr[i]);temPidArr.push(currentTemArr[i].pid);}}} if(temArr.length==0){delete that.elemObj[rmmds];}else{that.elemObj[rmmds]=temArr;} rmmds=(rmmds==E.defaultRmmds)?'':rmmds;if(exposureBannerArr.length>0||exposurePidArr.length>0){E.info.push(rmmds+'|'+exposureBannerArr.join(',')+'|'+exposurePidArr.join(','));}}},fixedDomHeight:function(){var h=0;if($('.fixed_header_item').length>0){h=$('.fixed_header_item').outerHeight(true);} return h;},changeRecord:function(option){var E=this;if(option){if(option.$container){E.collectExposureDomA(option.$container);}else if(option.$a){E.retestRecord(option.$a,option.type);}else if(option.$observers){E.activateObserver(option.$observers);}else if(option.checkall==1){E.registerRecord();}else if(option.$root){E.setIntersectObjHasRoot(option.$root);}}},retestRecord:function(variable,type){var E=this,rmmds='',id='';if(variable[0]instanceof HTMLElement||typeof(variable)==='string'){if(typeof(variable)==='string'){rmmds=variable||E.defaultRmmds;id=type||'';}else{var search=variable[0].search;rmmds=Rd.Gp('rmmds',search)||E.defaultRmmds;id=(type==1)?Rd.Gp('bid',search):'';} rmmds=(rmmds)?rmmds.replace(/__\d+$/,''):'';if(Rd.elemObj){var changeScrollTimer=setTimeout(function(){for(rmmdsName in Rd.elemObj){if(rmmdsName.indexOf(rmmds)>-1&&Rd.elemObj[rmmdsName]&&Rd.elemObj[rmmdsName].length>0){E.elemExposure(rmmdsName,id);}} E.sendDc(E.info);clearTimeout(changeScrollTimer);},500);}}},collectElemObj:function($obj,Rposition,showId,isBanner){var E=this;if(showId&&showId.length>0){Rposition=(Rposition=='')?E.defaultRmmds:Rposition;Rd.elemObj=Rd.elemObj||{};var elemModule=Rd.elemObj[Rposition]||[],notExist=E._isExit(elemModule,showId),singleElem={},$scrollView=null,rect={};if(notExist){singleElem.elem=$obj;singleElem.pid=showId;$scrollView=$obj.parents(E.coverContainerArr.join(','));if($scrollView&&$scrollView.length>0){singleElem.$shadeParent=$scrollView;} if(isBanner){singleElem.isBanner=isBanner;} elemModule.push(singleElem);Rd.elemObj[Rposition]=elemModule;}}},getUrlInfo:function($this){var E=this,link=$this.attr('href')||$this.attr('data-link'),rmmds=Rd.Gp('rmmds',link);return{pid:Rd.Gpid(link,Rd.site)||'',bid:Rd.Gp('bid',link)||'',rmmds:(rmmds)?rmmds:'',id:Rd.Gpid(link,Rd.site)||Rd.Gp('bid',link)||''}},activateObserver:function(objs,Observer){var E=this,_Observer=Observer||E.Observer;if(objs.length>0){objs.each(function(index,obj){if(!$(obj).hasClass('jsObserver'))$(obj).addClass('jsObserver');if($(obj).attr('collected')!=1){$(obj).attr('collected',1);_Observer.unobserve(obj);_Observer.observe(obj);}});}},setIntersectObjHasRoot:function($root){var E=this,option={'threshold':[0.5],'root':$root[0]};var rootObserver=new IntersectionObserver(function(entries,observer){E.ObserverCallback(entries,observer);},option);E.activateObserver($root.find('a').addClass('jsObserver'),rootObserver);},setIntersectObj:function(){var E=this;E.Observer=new IntersectionObserver(function(entries,observer){E.ObserverCallback(entries,observer);},{'threshold':[0.5]});},ObserverCallback:function(entries,observer){var E=this;var data={},dataArr=[],idArr=[];$.each(entries,function(n,entry){if(entry.intersectionRatio>=0.5){var target=entry.target;if($(target).attr('href')){if(E.getParentZIndex($(target))){observer.unobserve(target);var info=E.getUrlInfo($(target)),rmmds=info.rmmds||E.defaultRmmds,idList=E.idList[info.rmmds]||[];if(info&&$.inArray(info.id,idList)<0&&$.inArray(info.id,idArr)<0){data[info.rmmds]=data[info.rmmds]||{'bid':'','pid':''};data[info.rmmds].bid+=(info.bid)?(info.bid+','):'';data[info.rmmds].pid+=(info.pid)?(info.pid+','):'';idArr.push(info.id);}}}else{observer.unobserve(target);}}});for(d in data){dataArr.push(d+'|'+data[d].bid+'|'+data[d].pid);} E.sendDc(dataArr);},getParentZIndex:function($target){var canSee=true;if($target.parents('.barsamelist').length>0){var $p=$target.parents('.barsamelist'),zindex=$p.css('z-index');$p.siblings().each(function(index,obj){if($(obj).css('z-index')>zindex){canSee=false;}})} return canSee;},collectExposureDomA:function($conntainer){var E=this,c='collected',that=Rd,_$conntainer=$conntainer||$(document),$dom=_$conntainer.find('a:not('+E.observerClassName+')[href^="'+E.startCharacter+'"]['+c+'!=1], li[data-url]');$dom.each(function(){var $this=$(this),collected=$this.attr(c),link=$this.attr('href')||$this.attr('data-url'),bid=Rd.Gp('bid',link),pid=Rd.Gpid(link,Rd.site),rmmds=Rd.Gp('rmmds',link)||'';if(collected!=1){rmmds=(rmmds=='')?E.defaultRmmds:rmmds;bid=bid.split('%');if(bid&&bid[0]!=''){E.collectElemObj($this,rmmds,bid[0],1);} if(pid){E.collectElemObj($this,rmmds,pid);} $this.attr(c,1);$this.addClass(E.collectName);}});E.registerRecord();},getOffetBox:function(elem){var box=elem.getBoundingClientRect();return{top:box.top+document.documentElement.scrollTop,left:box.left,right:box.right,width:box.width,height:box.height}},_isExit:function(arr,id){if(!arr||arr&&arr.length==0)return true;var i=0,len=arr.length,notExist=true;for(;i<len;i++){if(arr[i].pid==id){notExist=false;}} return notExist;},bindEvent:function(){var E=this;$(document).on('click','.'+E.collectName+','+E.observerClassName,function(event){var $this=$(this),link=$this.attr('href')||$this.attr('data-url'),bid=Rd.Gp('bid',link),pid=Rd.Gpid(link,Rd.site),rmmds=Rd.Gp('rmmds',link);$this.removeClass(E.collectName);if(bid||pid){E.sendDc([rmmds+'|'+bid+'|'+pid],1);}});},sendDc:function(info,acType){var E=this,s='',that=window.Rd,i=0;if(typeof(info)!="undefined"&&(info instanceof Array)&&info.length>0){E.D['ac']=(acType==1)?E.ac[acType-1]:E.ac[1];s='&info='+JSON.stringify(info);if(acType!=1){for(;i<info.length;i++){var infoItem=info[i].split('|'),bidArr=infoItem[1].split(','),rmmds=infoItem[0]||E.defaultRmmds;pidArr=(infoItem[2])?infoItem[2].split(','):'';if(bidArr[0]){if(E.idList[rmmds]){E.idList[rmmds]=E.idList[rmmds].concat(bidArr);}else{E.idList[rmmds]=bidArr;}} if(pidArr[0]){if(E.idList[rmmds]){E.idList[rmmds]=E.idList[rmmds].concat(pidArr);}else{E.idList[rmmds]=pidArr;}}}} for(var k in E.D){s+='&'+k+'='+E.D[k];} var g=E.exposureUrl+s+'&callback=?';$.getJSON(g,function(){});E.info=[];}}};$(function(){var hostname=location.host,switchconfig=window.G_SWITCH_CONFIG&&window.G_SWITCH_CONFIG.exposure;if(switchconfig){if(switchconfig.pc&&((hostname.indexOf('ar')>-1)&&switchconfig.pc.ar||(hostname.indexOf('banggood.in')>-1)&&switchconfig.pc.in||(hostname.indexOf('banggood.com')>-1)&&switchconfig.pc.main)){Rd.exposureByNewWay=true;} if(switchconfig.wap&&((hostname.indexOf('us')>-1)&&switchconfig.wap.us||(hostname.indexOf('eu')>-1||hostname.indexOf('uk')>-1)&&switchconfig.wap.eu)){Rd.exposureByNewWay=true;}} Rd.init();$('.goodlist_1 a').click(function(){var $that=$(this);var $li=$(this).parents('li');var name=$li.find('.title a').attr('title');var proId=$li.data('pid');var type=0;var report_search_data=window.report_search_data||{};var fuzzyType=report_search_data.fuzzyType;var click_pro_cid=0;var act_word=$that.parents('.good_box_min').find('.matching_keywords').map(function(){return $(this).text();}).get().join(' ');if($(this).parents('.good_box_min')[0]==$('.good_box_min').eq(0)[0]&&report_search_data.ac_num>0){type=1;var cid=$li.data('cid');if(report_search_data.pid_cat_type=='searchByCat'){click_pro_cid='3-'+cid;}else if(report_search_data.default_cat==cid||report_search_data.key_cat==cid){click_pro_cid='2-'+cid;}else{click_pro_cid='1-'+cid;}}else if(fuzzyType=='txt'){type=2;}else if(fuzzyType=='cat'){type=3;}else if(fuzzyType=='key'){type=4;} var pos=parseInt($(this).parents('li').index())+1;sessionStorage.setItem('report_search_click_data',JSON3.stringify({pid:proId,type:type,pos:pos,name:name,act_word:act_word,click_pro_cid:click_pro_cid}))});})}();;var JGData={C:{},classfiter:['_20161124','_20161212','_170504','_20170111','_20161213','_20161216','_20161217','_20170321','_170328','_170329','_170330','_170627','_1101','_20170105','_170724','_170807','_170804','_170801','_170719','_170720','_170721','_170722','_170815','_170621','_170821','_170831','_170901','_170717','_170718','_170906','_170808','_170921','_170412','_171016','_171012','_171017','_171020','_171031','_171026','_171101','_171108','_171110','_171113','_171120','_171124','_171205','_171107','_171214','_171215','_171228','_171221','_171225','_180106','_180112','_180117','_171115','_080129','_180201','_180208','_180308','_180115','_180223','_180306','_180405','_180412','_180411','_180326','_180327','_180104','_180516','_180524','_180601','_180604','_180418','_180607','_180611','_180508','_180509','_180510','_180613','_180502','_180514','_180605','_180608','_180709','_180702','_180710','_180627','_180724','_20180803','_180727','_180808','_180801','_180814','_180829','_180816','_180821','_180820','_180903','_180807','_181008','_180830','_181009','_20170426','_181031','_20181231','_181024'],actiontype:['click','hover','show'],accounttype:['orderList','wishList','coupons','myPreorders','points','accountSettings','affiliate','referrals','giftCard','dropship','addressList','tracking','community'],accountfiter:['t%3DordersList','t%3Dwishlist','t%3DmyCoupons','t%3DpreOrders','t%3Dpoints','t%3Dsetting','ffiliate','t%3Dreferrals','t%3Dgiftcard','t%3Ddropship','t%3Daddress','t%3DmsgList','t%3Dposts','t%3Dmsn','t%3DmyReview'],type:['home','category','search','prodcut','brand','orderList','newArrival','flashDeals','preOrder','shoppingCart','checkoutSuccess','addressList','wishList','coupons','myPreorders','points','accountSettings','brandStreet','login','affiliate','referrals','giftCard','dropship','community','tracking','helpCenter','wholesale'],categoryfiter:['arrivals','%2Fsearch%2F','%2Fbuy%2F','%2FFlashdeals','2FDeals_','%2Fpreorder','%2Fbrands','login','help_center','Wholesale','_hl','%2Fshopping_cart'],categoryfitertype:['newArrival','search','search','flashDeals','flashDeals','preOrder','brand','login','helpCenter','wholesale','helpCenter','shoppingCart'],tm24:1440000,ty1:31104000000,referer:document.referrer.replace(/\$/g,""),visit_page:document.location.href,site:document.location.host,domain:document.domain.split(".")[1],Wv:function(s,g,p,l){s=s+"="+g+"; path=/; ";l&&(s+="expires="+(new Date(new Date().getTime()+l)).toGMTString()+"; ");p&&(s+="domain="+p+";");document.cookie=s;},Vv:function(y){for(var g=[],t=document.cookie.split(";"),l=RegExp("^\\s*"+y+"=\\s*(.*?)\\s*$"),s=0;s<t.length;s++){var p=t[s]["match"](l);p&&g.push(p[1]);} return g;},Gp:function(l,p){var s=new RegExp(".*(?:^|&|[?]|[/])"+l+"=([^&]*).*$");var g=s.exec(p);return g?encodeURIComponent(g[1]):"";},Gup:function(n){var s=new RegExp("(^|&)"+n+"=([^&]*)(&|$)");var g=window.location.search.substr(1).match(s);if(g!=null){return unescape(g[2])};},Gpid:function(l,h){var s=h=='us.banggood.com'&&new RegExp(".*-wp-.*-([0-9]*)\\.html")||h=='eu.banggood.com'&&new RegExp(".*-wp-.*-([0-9]*)\\.html")||new RegExp(".*-p-([0-9]*)\\.html");var g=s.exec(l);return g?encodeURIComponent(g[1]):0;},Gcid:function(l,h){var s=h=='us.banggood.com'&&new RegExp(".*-c-[a-zA-Z]{2,3}-([0-9]*)[-.]")||h=='eu.banggood.com'&&new RegExp(".*-c-[a-zA-Z]{2,3}-([0-9]*)[-.]")||new RegExp(".*-c-([0-9]*)[-.]");var g=s.exec(l);return g?encodeURIComponent(g[1]):0;},Gbrand:function(l,h){var s=new RegExp(".*-b-([0-9]*)\\.html");var g=s.exec(l);return g?encodeURIComponent(g[1]):0;},Gkeyword:function(l,h){var s=h=='us.banggood.com'&&new RegExp("\\/wh_search\\/[a-zA-Z]{2,3}\\/([^/]*)[.\]")||h=='eu.banggood.com'&&new RegExp("\\/wh_search\\/[a-zA-Z]{2,3}\\/([^/]*)[.\]")||new RegExp("\\/search\\/([^/]*)[.\]");var g=s.exec(l);return g?encodeURIComponent(g[1]):"";},parseRP:function(referer){var a=document.createElement("a");a.href=referer;this.C.referer_group='';var r_categories=this.Gcid(a.pathname,a.hostname);var r_products=this.Gpid(a.pathname,a.hostname);var r_brandid=this.Gbrand(a.pathname,a.hostname);var rStatus=this.C.referer.indexOf('.html')<0;var rkeyfiter='banggood.com%2F';var rkeyfiterlength=rkeyfiter.length;var rfirstIndex=this.C.referer.indexOf('banggood.com%2F');if(this.C.referer_group.substr(rfirstIndex+rkeyfiterlength,1)==''){this.C.referer_group=this.type[0];} if(r_categories>0){this.C.referer_group=this.type[1];} if(r_products>0){this.C.referer_group=this.type[3];} if(r_brandid>0){this.C.referer_group=this.type[4];} for(var rpi=0;rpi<this.accountfiter.length;rpi++){if(rStatus&&this.C.referer_group.indexOf(this.accountfiter[rpi])>-1){if(this.accountfiter[rpi]=='t%3Dmsn'||this.accountfiter[rpi]=='t%3DmyReview'){this.C.referer_group=this.accounttype[12];}else{this.C.referer_group=this.accounttype[rpi];}}} for(var ri=0;ri<this.categoryfiter.length;ri++){if(this.C.referer.indexOf(this.categoryfiter[ri])>-1){this.C.referer_group=this.categoryfitertype[ri];}}},parseVP:function(w){var categories_id=this.Gcid(w.pathname,w.hostname);var products_id=this.Gpid(w.pathname,w.hostname);var brand_id=this.Gbrand(w.pathname,w.hostname);var pStatus=this.C.visit_page.indexOf('.html')<0;var keyfiter='banggood.com%2F';var keyfiterlength=keyfiter.length;var firstIndex=this.C.visit_page.indexOf('banggood.com%2F');this.C.visit_group='';if(this.C.visit_page.substr(firstIndex+keyfiterlength,1)==''){this.C.visit_group=this.type[0];} if(categories_id>0){this.C.visit_group=this.type[1];} if(products_id>0){this.C.visit_group=this.type[3];} if(brand_id>0){this.C.visit_group=this.type[4];} for(var pi=0;pi<this.accountfiter.length;pi++){if(pStatus&&this.C.visit_page.indexOf(this.accountfiter[pi])>-1){if(this.accountfiter[pi]=='t%3Dmsn'||this.accountfiter[pi]=='t%3DmyReview'){this.C.visit_group=this.accounttype[12];}else{this.C.visit_group=this.accounttype[pi];}}} for(var i=0;i<this.categoryfiter.length;i++){if(this.C.visit_page.indexOf(this.categoryfiter[i])>-1){this.C.visit_group=this.categoryfitertype[i];}} this.C.info={};this.C.point_id='';this.C.order_id='';this.C.label='';this.C.action='';},init:function(){this.C.customers_id=this.Vv('dc_cid')[0]||0;this.C.site=this.site;this.C.domain=this.domain;var u=this.Vv('rec_uid'),u1=u.length>0?u[0].split('|'):[],s=this.Vv('__bguser'),s1=s.length>0?s[0].split('|'):[];if(u1.length>0){this.C.ft=u1[1]||0;} this.C.user_id=s1.length>0?s1[2]:0;this.C.sess_id=s1.length>0?s1[1]:0;if(this.referer){this.C.referer=encodeURIComponent(this.referer);this.parseRP(this.referer);}else{this.C.referer_group='';this.C.referer='';} this.C.visit_page=encodeURIComponent(this.visit_page);this.parseVP(document.location);this.sendRec();var Redefinename=this.JGCheckClassName;this.C.info=JSON.stringify(this.C.info);var S=this;$(document).on('click','a,dt,img,span,input,label,li,ul,div,i,b,strong,s,h3,u,h4,button',function(event){var o=this;var data=$(o).data();if(['home'].includes(data.visitGroup)&&data.label){}else{var text=$(this).get(0).tagName;var clickname=$(this).attr('class');var arr=[];arr.push(clickname);if(text=='A'&&text.length==1){if($(this).hasClass('clickandsend')){Redefinename(JGData,arr,3,$(this));}else{Redefinename(JGData,arr,1,$(this));}}else{Redefinename(JGData,arr,3,$(this));}}});$(document).on('mousedown','[data-visit-group]',function(event){var o=this;var data=$(o).data();if(['home'].includes(data.visitGroup)&&data.label){var sendData={point_id:data.pointId,label:data.label,visit_group:data.visitGroup,info:{},};for(var key in data){if(/^(text\d)|(string\d)$/.test(key)){sendData.info[key]=data[key];if(sendData.info.string2!=undefined){sendData.info.string2=sendData.info.string2.replace(/&/g,'%26');}}} if($(o)[0].localName=='a'){if($(o).attr('href').indexOf('from=nav')==-1){var hrefNav=$(o).attr('href')+($(o).attr('href').indexOf('?')>-1?'&':'?')+'from=nav';$(o).attr('href',hrefNav);}} if(!S.C.sess_id){let userData=($.cookie('__bguser')||'').split('|');S.C.sess_id=userData[1]||'';S.C.user_id=userData[2]||'';} var unixStr=new Date().getTime();var href=$(o).attr('href')||'';var twId=S.C.sess_id+unixStr;if(window.nDC&&window.nDC.keywordStorage){window.nDC.keywordStorage.push({key:href,value:twId});} sendData.info.string4=twId;S.C.point_id=sendData.point_id;S.C.label=sendData.label;S.C.visit_group=sendData.visit_group;if(data.text1!=undefined)sendData.info.text1=data.text1;S.C.info=Object.assign({},sendData.info);S.C.info=JSON.stringify(S.C.info);S.sendRec(2);}});},CheckSearchkeyWordsBtn:function(){this.C.info={};var keyword=document.querySelector("input[name='keywords'][type='text']").value,keywordTypeList=['recommendkeyword','activity','userkeyword'],hinttagname=document.querySelector("input[name='hint_search_tagname']").value,keyType='';if($('.'+this.C.label).hasClass('sk_action_button')){keyword=$('.sk_action_button').closest('.sk_action_parent').find('.sk_action_text').val()||'';}else{if(window.localStorage.getItem("_RecKey")!=null&&window.localStorage.getItem("_RecKey")==keyword){keyType=keywordTypeList[0];}else{if(hinttagname.length>0&&keyword==hinttagname){keyType=keywordTypeList[1];}else{keyType=keywordTypeList[2];}}} this.C.info={'string1':keyword,'string2':keyType,};this.C.info=JSON.stringify(this.C.info);return this.C.info;},CheckLenovokeyWords:function($this,type){if($this.length>0){this.C.info={'string1':$this.clone().children('u').remove().end().text(),'string2':type=='history'?'userkeyword':type=='lenovo'?'lenovakeyword':'',};this.C.info=JSON.stringify(this.C.info);}},JGCheckClassName:function(obj,str,num,_this,directID){var result=str[0];var point_id='';if(_this==''){point_id=directID;obj.C.label=str;obj.C.action=obj.actiontype[num];obj.C.point_id=point_id;obj.sendRec(1);}else{point_id=_this.attr('data-point-id');var buryingPoint=_this.attr('burying-point-data');if(typeof(buryingPoint)!='undefined'){var reg=/^[0-9]+.?[0-9]*$/,buryingPointArr=buryingPoint.split('|'),classname=result,len=buryingPointArr.length,clickPoint=buryingPointArr[2],hoverPoint=buryingPointArr[3],aClickSend=buryingPointArr[len-1];if(len>2&&buryingPointArr[0]&&(clickPoint&&(clickPoint!=1)||hoverPoint&&(hoverPoint!=1)&&reg.test(hoverPoint))){obj.C.label=buryingPointArr[0];if(num==2){if(hoverPoint&&(hoverPoint!=1)&&reg.test(hoverPoint)){obj.C.action=obj.actiontype[1];obj.C.point_id=hoverPoint;obj.sendRec(1);}}else{if(aClickSend==1)num=3;if(clickPoint){obj.C.action=obj.actiontype[0];obj.C.point_id=clickPoint;if(num==3){obj.sendRec(1);}else{if(_this.parent().hasClass('hotcate_list')){obj.sendRec(1);}else{obj.sendRec(2);}}}}}}else if(typeof(result)!='undefined'&&typeof(point_id)!='undefined'){var arrpoint_id=point_id.split('|');classname=result.split(' ');mypoint_id=point_id;for(var i=0;i<classname.length;i++){for(var j=0;j<obj.classfiter.length;j++){if(classname[i].indexOf(obj.classfiter[j])>-1){obj.C.label=classname[i];if(obj.C.label=='top_search_button_20161212'||obj.C.label=='top_search_button_170412'||$('.'+obj.C.label).hasClass('sk_action_button')){obj.CheckSearchkeyWordsBtn();} if(obj.C.label=='top_Dropdownboxhistory_link_20170426'){obj.CheckLenovokeyWords(_this,'history');} if(obj.C.label=='top_Dropdownlenovekeyword_link_20181231'){obj.CheckLenovokeyWords(_this,'lenovo');} if(num==2){if(classname.indexOf('homehover')>-1){obj.C.action=obj.actiontype[1];if(arrpoint_id.length==2){mypoint_id=arrpoint_id[1];} obj.C.point_id=mypoint_id;obj.sendRec(1);}}else{if(!_this.hasClass('nocountclick')){obj.C.action=obj.actiontype[0];if(arrpoint_id.length==2){mypoint_id=arrpoint_id[0];} obj.C.point_id=mypoint_id;if(num==3){obj.sendRec(1);}else{if(_this.parent().hasClass('hotcate_list')){obj.sendRec(1);}else{obj.sendRec(2);}}}}}}}}}},sendRec:function(num){var JGstorage=window.localStorage;if(typeof(num)!='undefined'){var s='';for(var k in this.C){s+='&'+k+'='+this.C[k];} if(num==1){var g=("https:"==document.location.protocol?"https://dc":"http://dc")+".banggood.com/index.php?com=sess&t=record"+s+"&callback=?";$.getJSON(g,function(){});}else if(num==2){JGstorage.setItem("JGAutoRecord",s);}else if(typeof num=='string'){JGstorage.setItem("JGMultiRecord",num);}}else{var JGAutoRecord=JGstorage.getItem("JGAutoRecord");var JGMultiRecord=JGstorage.getItem("JGMultiRecord");var JGAutoUrl=("https:"==document.location.protocol?"https://dc":"http://dc")+".banggood.com/index.php?com=sess&t=record{#jg#}&callback=?";if(JGAutoRecord!=null){$.getJSON(JGAutoUrl.replace('{#jg#}',JGAutoRecord),function(){});JGstorage.removeItem('JGAutoRecord');} if(JGMultiRecord!=null){var resArr=(JGMultiRecord+'').split('$|$');if(resArr.length>1){for(var i=0;i<resArr.length;i++){$.getJSON(JGAutoUrl.replace('{#jg#}',resArr[i]),function(){});}}else{$.getJSON(JGAutoUrl.replace('{#jg#}',resArr[0]),function(){});} JGstorage.removeItem('JGMultiRecord');}}},callback:function(ret){var _t=ret.split('.');if(_t.length>1){var uid=_t[0]||0,sid=_t[1]||0,st=_t[2]||0,ft=this.C.ft||st;this.C.user_id=uid;this.C.sess_id=sid;this.Wv('rec_uid',uid+'|'+ft,'banggood.com',this.ty1);this.Wv('rec_sid',sid+'|'+st,'banggood.com',this.tm24);} return true}};(function(){JGData.init();})();;var Basket={C:{},rp:document.referrer.replace(/\$/g,""),vp:document.location.href,addcartBtn:".buy_link .addcart,.buy_link .buynow,.buy_link .perorder,.goods_together_sub .buy_now,.goods_together_sub .selected_cart,.fast_addcart, .addToCartBtn .add_to_cart,.addToCartBtn .perorder,.item_addcart_fixed .perorder,.warehouse_box .bd ul li .addBtn .add_cart,.item_addcart_fixed .add_to_cart,.datacube_ac_select_cart,.datacube_onlyforyou_ac_cart,.datacube_onlyforyou_ac_wish",attrbtn:".good_main .attr,.item_color_box,.item_size_box",Vv:function(y){for(var g=[],t=document.cookie.split(";"),l=RegExp("^\\s*"+y+"=\\s*(.*?)\\s*$"),s=0;s<t.length;s++){var p=t[s]["match"](l);p&&g.push(p[1])}return g},Gpid:function(l,h){var s=h=="us.banggood.com"&&new RegExp(".*-wp-.*-([0-9]*)\\.html")||h=="eu.banggood.com"&&new RegExp(".*-wp-.*-([0-9]*)\\.html")||new RegExp(".*-p-([0-9]*)\\.html");var g=s.exec(l);return g?encodeURIComponent(g[1]):0},parseVP:function(w){this.C.products_id=this.Gpid(w.pathname,w.hostname)},init:function(){var u=this.Vv("__bguser");this.C.bguser=u;this.C.visit_page=encodeURIComponent(this.vp);if(this.rp){this.C.referer=encodeURIComponent(this.rp)}this.parseVP(document.location);var _this=this;$(document).on("click",this.addcartBtn,function(){_this.ClicktoCart($(this).attr("data-product-id")||0,_this)})},ClicktoCart:function(id,that){var JGOBJ=Basket;var num=0;this.C.products_id=id||this.C.products_id;if($(that.attrbtn).length>0){var count=$(that.attrbtn).length;$(that.attrbtn).each(function(){if($("#centerCtrl").length>0){if($(this).find("li").hasClass("active")){num++}}else{if($(this).find(".attrValues").hasClass("hasclicked")){num++}}});if(count==num){JGOBJ.sendRec()}}else{JGOBJ.sendRec()}},sendRec:function(){var s="";for(var k in this.C){s+="&"+k+"="+this.C[k]}var g=("https:"==document.location.protocol?"https://dc":"http://dc")+".banggood.com/?com=sess&t=basket&zmkm=1"+s+"&callback=?";$.getJSON(g,function(){})},callback:function(ret){}};if($("#centerCtrl").length>0){Basket.init()}else{$(function(){if(!window.datacube_not_auto_send_visit){Basket.init()}})}var BGSffix={fnInit:function(){function preloadimages(arr){var newimages=[];var arr=(typeof arr!="object")?[arr]:arr;for(var i=0;i<arr.length;i++){newimages[i]=new Image();newimages[i].src=arr[i]}}var imgArr=["https://img.staticbg.com/banner/images/bgin_domain.jpg"];preloadimages(imgArr);var curUrl=window.location.href;if(curUrl.indexOf("banggood.com")>-1){this.fnJSONRedirect()}},fnGetJSONData:function(type,ajaxUrl,dataType,callback){$.ajax({url:ajaxUrl,type:type,dataType:dataType,success:function(res){callback&&callback(res)}})},fnJSONRedirect:function(){var _this=this;var ajaxUrl="";if(typeof(homeUrl)=="undefined"){var homeUrl=("https:"!=document.location.protocol)?"http://":"https://";homeUrl+=window.location.host;ajaxUrl=homeUrl+"/banggoodInRedirect.html"}else{ajaxUrl=homeUrl+"banggoodInRedirect.html"}if(_this.getUrlParam("utm_medium")!=null){if(ajaxUrl.indexOf("?")>-1){ajaxUrl+="&utm_medium="+_this.getUrlParam("utm_medium")}else{ajaxUrl+="?utm_medium="+_this.getUrlParam("utm_medium")}}if(_this.getUrlParam("from")!=null){if(ajaxUrl.indexOf("?")>-1){ajaxUrl+="&from="+_this.getUrlParam("from")}else{ajaxUrl+="?from="+_this.getUrlParam("from")}}_this.fnGetJSONData("get",ajaxUrl,"json",function(result){})},getUrlParam:function(name){var reg=new RegExp("(^|&)"+name+"=([^&]*)(&|$)");var r=window.location.search.substr(1).match(reg);if(r!=null){return unescape(r[2])}else{return null}}};$(function(){BGSffix.fnInit()});;(function(){var hexcase=0;var b64pad="";var chrsz=8;function hex_md5(s){return binl2hex(core_md5(str2binl(s),s.length*chrsz));} function b64_md5(s){return binl2b64(core_md5(str2binl(s),s.length*chrsz));} function str_md5(s){return binl2str(core_md5(str2binl(s),s.length*chrsz));} function hex_hmac_md5(key,data){return binl2hex(core_hmac_md5(key,data));} function b64_hmac_md5(key,data){return binl2b64(core_hmac_md5(key,data));} function str_hmac_md5(key,data){return binl2str(core_hmac_md5(key,data));} function md5_vm_test(){return hex_md5("abc")=="900150983cd24fb0d6963f7d28e17f72";} function core_md5(x,len){x[len>>5]|=0x80<<((len)%32);x[(((len+64)>>>9)<<4)+14]=len;var a=1732584193;var b=-271733879;var c=-1732584194;var d=271733878;for(var i=0;i<x.length;i+=16){var olda=a;var oldb=b;var oldc=c;var oldd=d;a=md5_ff(a,b,c,d,x[i+0],7,-680876936);d=md5_ff(d,a,b,c,x[i+1],12,-389564586);c=md5_ff(c,d,a,b,x[i+2],17,606105819);b=md5_ff(b,c,d,a,x[i+3],22,-1044525330);a=md5_ff(a,b,c,d,x[i+4],7,-176418897);d=md5_ff(d,a,b,c,x[i+5],12,1200080426);c=md5_ff(c,d,a,b,x[i+6],17,-1473231341);b=md5_ff(b,c,d,a,x[i+7],22,-45705983);a=md5_ff(a,b,c,d,x[i+8],7,1770035416);d=md5_ff(d,a,b,c,x[i+9],12,-1958414417);c=md5_ff(c,d,a,b,x[i+10],17,-42063);b=md5_ff(b,c,d,a,x[i+11],22,-1990404162);a=md5_ff(a,b,c,d,x[i+12],7,1804603682);d=md5_ff(d,a,b,c,x[i+13],12,-40341101);c=md5_ff(c,d,a,b,x[i+14],17,-1502002290);b=md5_ff(b,c,d,a,x[i+15],22,1236535329);a=md5_gg(a,b,c,d,x[i+1],5,-165796510);d=md5_gg(d,a,b,c,x[i+6],9,-1069501632);c=md5_gg(c,d,a,b,x[i+11],14,643717713);b=md5_gg(b,c,d,a,x[i+0],20,-373897302);a=md5_gg(a,b,c,d,x[i+5],5,-701558691);d=md5_gg(d,a,b,c,x[i+10],9,38016083);c=md5_gg(c,d,a,b,x[i+15],14,-660478335);b=md5_gg(b,c,d,a,x[i+4],20,-405537848);a=md5_gg(a,b,c,d,x[i+9],5,568446438);d=md5_gg(d,a,b,c,x[i+14],9,-1019803690);c=md5_gg(c,d,a,b,x[i+3],14,-187363961);b=md5_gg(b,c,d,a,x[i+8],20,1163531501);a=md5_gg(a,b,c,d,x[i+13],5,-1444681467);d=md5_gg(d,a,b,c,x[i+2],9,-51403784);c=md5_gg(c,d,a,b,x[i+7],14,1735328473);b=md5_gg(b,c,d,a,x[i+12],20,-1926607734);a=md5_hh(a,b,c,d,x[i+5],4,-378558);d=md5_hh(d,a,b,c,x[i+8],11,-2022574463);c=md5_hh(c,d,a,b,x[i+11],16,1839030562);b=md5_hh(b,c,d,a,x[i+14],23,-35309556);a=md5_hh(a,b,c,d,x[i+1],4,-1530992060);d=md5_hh(d,a,b,c,x[i+4],11,1272893353);c=md5_hh(c,d,a,b,x[i+7],16,-155497632);b=md5_hh(b,c,d,a,x[i+10],23,-1094730640);a=md5_hh(a,b,c,d,x[i+13],4,681279174);d=md5_hh(d,a,b,c,x[i+0],11,-358537222);c=md5_hh(c,d,a,b,x[i+3],16,-722521979);b=md5_hh(b,c,d,a,x[i+6],23,76029189);a=md5_hh(a,b,c,d,x[i+9],4,-640364487);d=md5_hh(d,a,b,c,x[i+12],11,-421815835);c=md5_hh(c,d,a,b,x[i+15],16,530742520);b=md5_hh(b,c,d,a,x[i+2],23,-995338651);a=md5_ii(a,b,c,d,x[i+0],6,-198630844);d=md5_ii(d,a,b,c,x[i+7],10,1126891415);c=md5_ii(c,d,a,b,x[i+14],15,-1416354905);b=md5_ii(b,c,d,a,x[i+5],21,-57434055);a=md5_ii(a,b,c,d,x[i+12],6,1700485571);d=md5_ii(d,a,b,c,x[i+3],10,-1894986606);c=md5_ii(c,d,a,b,x[i+10],15,-1051523);b=md5_ii(b,c,d,a,x[i+1],21,-2054922799);a=md5_ii(a,b,c,d,x[i+8],6,1873313359);d=md5_ii(d,a,b,c,x[i+15],10,-30611744);c=md5_ii(c,d,a,b,x[i+6],15,-1560198380);b=md5_ii(b,c,d,a,x[i+13],21,1309151649);a=md5_ii(a,b,c,d,x[i+4],6,-145523070);d=md5_ii(d,a,b,c,x[i+11],10,-1120210379);c=md5_ii(c,d,a,b,x[i+2],15,718787259);b=md5_ii(b,c,d,a,x[i+9],21,-343485551);a=safe_add(a,olda);b=safe_add(b,oldb);c=safe_add(c,oldc);d=safe_add(d,oldd);} return Array(a,b,c,d);} function md5_cmn(q,a,b,x,s,t){return safe_add(bit_rol(safe_add(safe_add(a,q),safe_add(x,t)),s),b);} function md5_ff(a,b,c,d,x,s,t){return md5_cmn((b&c)|((~b)&d),a,b,x,s,t);} function md5_gg(a,b,c,d,x,s,t){return md5_cmn((b&d)|(c&(~d)),a,b,x,s,t);} function md5_hh(a,b,c,d,x,s,t){return md5_cmn(b^c^d,a,b,x,s,t);} function md5_ii(a,b,c,d,x,s,t){return md5_cmn(c^(b|(~d)),a,b,x,s,t);} function core_hmac_md5(key,data){var bkey=str2binl(key);if(bkey.length>16)bkey=core_md5(bkey,key.length*chrsz);var ipad=Array(16),opad=Array(16);for(var i=0;i<16;i++){ipad[i]=bkey[i]^0x36363636;opad[i]=bkey[i]^0x5C5C5C5C;} var hash=core_md5(ipad.concat(str2binl(data)),512+data.length*chrsz);return core_md5(opad.concat(hash),512+128);} function safe_add(x,y){var lsw=(x&0xFFFF)+(y&0xFFFF);var msw=(x>>16)+(y>>16)+(lsw>>16);return(msw<<16)|(lsw&0xFFFF);} function bit_rol(num,cnt){return(num<<cnt)|(num>>>(32-cnt));} function str2binl(str){var bin=Array();var mask=(1<<chrsz)-1;for(var i=0;i<str.length*chrsz;i+=chrsz) bin[i>>5]|=(str.charCodeAt(i/chrsz)&mask)<<(i%32);return bin;} function binl2str(bin){var str="";var mask=(1<<chrsz)-1;for(var i=0;i<bin.length*32;i+=chrsz) str+=String.fromCharCode((bin[i>>5]>>>(i%32))&mask);return str;} function binl2hex(binarray){var hex_tab=hexcase?"0123456789ABCDEF":"0123456789abcdef";var str="";for(var i=0;i<binarray.length*4;i++){str+=hex_tab.charAt((binarray[i>>2]>>((i%4)*8+4))&0xF)+ hex_tab.charAt((binarray[i>>2]>>((i%4)*8))&0xF);} return str;} function binl2b64(binarray){var tab="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";var str="";for(var i=0;i<binarray.length*4;i+=3){var triplet=(((binarray[i>>2]>>8*(i%4))&0xFF)<<16)|(((binarray[i+1>>2]>>8*((i+1)%4))&0xFF)<<8)|((binarray[i+2>>2]>>8*((i+2)%4))&0xFF);for(var j=0;j<4;j++){if(i*8+j*6>binarray.length*32)str+=b64pad;else str+=tab.charAt((triplet>>6*(3-j))&0x3F);}} return str;} var SEM={visit_data:null,getCookie:function(cname){var name=cname+"=";var ca=document.cookie.split(';');for(var i=0;i<ca.length;i++){var c=ca[i];while(c.charAt(0)==' ')c=c.substring(1);if(c.indexOf(name)!=-1)return c.substring(name.length,c.length);} return"";},sendSEM:function(page,data,bool){data=data||{};var DEFAULT_DATA={'send_to':['AW-992047525','AW-976926855'],'ecomm_pagetype':page,'ecomm_prodid':null,'isSaleItem':null,'ecomm_totalvalue':null,'ecomm_pcat':null,'ecomm_name':null,'ecomm_site':typeof google_tag_params==='undefined'?'pc':google_tag_params["ecomm_site"],'ecomm_lang':this.getCookie('_bgLang'),'ecomm_currency':this.getCookie('currency'),'first_source':this.fnVisit(0),'campaign':this.fnVisit(2),'medium':this.fnVisit(1),'size':[],'color':[],'material':[],'pattern':[],'brand':[],'user_id':hex_md5(this.getCookie('__bguser').split('|')[2]||""),};if(bool){DEFAULT_DATA=data;}else{for(var key in data){if(data.hasOwnProperty(key)){DEFAULT_DATA[key]=data[key];}}} if(typeof gtag!=='undefined'){for(var key in DEFAULT_DATA){if(DEFAULT_DATA[key]===null||DEFAULT_DATA[key]==="null"){delete DEFAULT_DATA[key];}} gtag('event','page_view',DEFAULT_DATA);}},fnVisit:function(index){if(!this.visit_data)return'null';return this.visit_data[index]||'null';},init:function(){this.visit_data=this.getCookie('__bgvisit');if(this.visit_data){this.visit_data=this.visit_data.split('|').filter(function(item,index){return(index===1||index===2||index===3)&&item;})} this.handlePage();},handlePage:function(){var url=window.location.href,pathname='';if(typeof IS_INDEX==='undefined'){pathname=window.location.pathname}else{if(IS_INDEX){pathname=IS_INDEX;}} if(pathname==='/'||pathname=='1'){return this.sendSEM('home');}else if(this.include(url,'-p-')){return this.productDetail();}else if(this.include(url,'/buy/')||this.include(url,'/search/')){return this.search(url);}else if(this.include(url,'-c-')){return this.category(url);}else if(this.include(url,'shopping_cart.html')){return this.shopcart();}else if(this.include(url,'checkout.html')){return this.checkout();}else if(this.include(url,'checkOutSuccess')){return this.checkoutSuccess();}else if(this.include(url,'com=account')){return this.sendSEM('other');}else if(this.include(url,'pannel=register')){return this.sendSEM('other');}else if(this.include(url,'login.html')){return this.sendSEM('other');}else if(this.include(url,'showRegisterSuccess')){return this.sendSEM('other');}else if(this.include(url,'promotion')){return this.promotion(url);}else if(this.include(url,'collection')){return this.collection();}},include:function(target,str){return target.indexOf(str)!==-1;},productDetail:function(){var size_item=$('.item_size_box'),color_item=$('.item_color_box');var size=size_item.is(':visible')?size_item.find('.size_bd_box li').map(function(i,item){return $.trim($(item).attr('data-name'))}).get().filter(function(item){return item}):[],color=color_item.is(':visible')?color_item.find('.color_list li').map(function(i,item){return $.trim($(item).attr('data-name'))}).get():[];try{this.sendSEM('product',{'ecomm_name':$('.title_hd h2').attr('data-oldtext'),'ecomm_prodid':google_tag_params["ecomm_prodid"][0],'isSaleItem':!$('.addToCartBtn a').hasClass('gray'),'ecomm_pcat':google_tag_params["ecomm_pcat"],'size':size,'color':color,'pattern':google_tag_params['pattern'],'brand':$.trim($('.item_brand_box .exclick').text())||'null','ecomm_totalvalue':$('.item_now_price').attr('oriprice'),'material':google_tag_params['material']})}catch(error){console.log("SEM.js =>>",'detail');}},search:function(url){var keyword;if(this.include(url,'/search/')){keyword=url.match(/search\/(.*)\.html/)[1];}else{keyword=url.match(/buy\/(.*)\.html/)[1];} this.sendSEM('searchresults',{ecomm_name:keyword})},category:function(url){try{this.sendSEM('category',{ecomm_pcat:google_tag_params["ecomm_pcat"]})}catch(error){console.log('SEM.js ===>','category');}},shopcart:function(){try{var data=PInData;var cart=$('.newcart_list_items');var productName=[];data.line_items.forEach(function(item){productName.push(item.product_name);});this.sendSEM('cart',{'ecomm_totalvalue':ProductTotal,'ecomm_name':productName,'ecomm_prodid':google_tag_params["ecomm_prodid"],'size':google_tag_params["size"],'color':google_tag_params["color"],'material':google_tag_params["material"],'pattern':google_tag_params["pattern"],'brand':google_tag_params["brand"],'ecomm_pcat':PruductTree})}catch(error){console.log('SEM.js shopcart=>',error);this.sendSEM('cart',{'ecomm_name':cart.map(function(i,item){return $(item).find('.newcart_product .title').text()}).get(),'ecomm_prodid':cart.map(function(i,item){return $(item).attr('cart_id').split('_')[0]}).get(),'pattern':google_tag_params["pattern"],})}},checkout:function(){var data=PInData;var cart=$('.newcart_list_items');try{var productName=[];data.line_items.forEach(function(item){if(google_tag_params["ecomm_prodid"].indexOf(item.products_id+'')!==-1){productName.push(item.product_name);}});this.sendSEM('checkout',{'ecomm_name':productName,'ecomm_prodid':google_tag_params["ecomm_prodid"],'ecomm_totalvalue':$('#chkout_panel_grandtotal').attr('oritotal'),'size':google_tag_params["size"],'color':google_tag_params["color"],'material':google_tag_params["material"],'pattern':google_tag_params["pattern"],'brand':google_tag_params["brand"],'ecomm_pcat':PruductTree})}catch(error){console.log('SEM.js checout error',error);this.sendSEM('checkout',{'ecomm_name':cart.map(function(i,item){return $(item).find('.newcart_product .shipment_title').attr('title')}).get(),'ecomm_prodid':google_tag_params["ecomm_prodid"],'ecomm_totalvalue':$('#chkout_panel_grandtotal').attr('oritotal')})}},promotion:function(url){var name=url.match(/promotion-(.*)-\d/)[1];this.sendSEM('promotion',{ecomm_name:name||'null'});},collection:function(){var nameList=$('li[typeof=ListItem]').map(function(i,item){return $.trim($(item).text())}).get();this.sendSEM('collection',{ecomm_name:nameList[nameList.length-1]||'null'});},checkoutSuccess:function(){var $item=$('.pb_order_item');try{var data=typeof PInData==='object'?PInData:JSON.parse(PInData);var productName=[];data.line_items.forEach(function(item){productName.push(item.product_name);});this.sendSEM('purchase',{'ecomm_totalvalue':AllAmount,'ecomm_name':productName,'ecomm_prodid':google_tag_params_checkoutsuccess["ecomm_prodid"],'size':google_tag_params_checkoutsuccess["size"],'color':google_tag_params_checkoutsuccess["color"],'material':google_tag_params_checkoutsuccess["material"],'pattern':google_tag_params_checkoutsuccess["pattern"],'brand':google_tag_params_checkoutsuccess["brand"],'ecomm_pcat':typeof PruductTree==='string'&&!PruductTree?eval(PruductTree):PruductTree||'null'});gtag('event','conversion',{'send_to':'AW-992047525/cUeYCLuj_QgQpeOF2QM','value':typeof AllAmount==='undefined'?0:AllAmount,'currency':'USD','transaction_id':$('input[name=dbm_checkout_success]').map(function(i,item){return $(item).val()}).get().filter(function(item,index,self){return self.indexOf(item)===index})});}catch(error){console.log('SEM.js checkout=>',error);}}};$(window).ready(function(){SEM.init();})})()